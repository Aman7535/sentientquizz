<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sentient AI Quiz</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #00f3ff;
      --darker: #05071e;
    }

    body {
      margin: 0;
      font-family: 'Exo 2', sans-serif;
      background: #05071e;
      color: #fff;
      overflow: hidden;
    }

    /* Background canvas */
    .matrix-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1; /* behind everything */
      background: #05071e;
    }

    .container {
      position: relative;
      z-index: 1; /* on top of canvas */
      width: 100%;
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }

    .screen {
      display: none;
    }
    .screen.active {
      display: block;
    }

    h1 {
      font-family: 'Orbitron', sans-serif;
      color: var(--primary);
    }

    .btn {
      background: var(--primary);
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 18px;
      font-weight: bold;
      color: #05071e;
      transition: all 0.3s;
    }

    .btn:hover {
      background: #00d0e6;
    }

    .options-grid {
      display: grid;
      gap: 10px;
      margin-top: 20px;
    }

    .option-btn {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.2);
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      color: #fff;
    }

    .option-btn:hover {
      background: rgba(0,243,255,0.2);
    }

    .option-btn.correct {
      border-color: #00ff88;
      background: rgba(0,255,136,0.2);
    }

    .option-btn.incorrect {
      border-color: #ff0033;
      background: rgba(255,0,51,0.2);
    }

    .progress-bar {
      width: 100%;
      height: 12px;
      background: rgba(255,255,255,0.1);
      border-radius: 6px;
      margin: 15px 0;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      width: 0%;
      background: var(--primary);
      transition: width 0.5s;
    }

    .score-circle {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 30px auto;
      position: relative;
      background: conic-gradient(var(--primary) 0%, var(--darker) 0%);
      box-shadow: 0 0 30px rgba(0, 243, 255, 0.3);
      transition: background 1s linear;
    }
    .score-value {
      font-size: 36px;
      font-weight: bold;
    }

    .feedback-message {
      margin-top: 10px;
      padding: 10px;
      border-radius: 6px;
      display: none;
    }
    .feedback-correct {
      background: rgba(0,255,136,0.2);
      border: 1px solid #00ff88;
    }
    .feedback-incorrect {
      background: rgba(255,0,51,0.2);
      border: 1px solid #ff0033;
    }
  </style>
</head>
<body>
  <!-- FIXED: use canvas -->
  <canvas class="matrix-bg" id="matrixBg"></canvas>

  <div class="container">
    <!-- Start Screen -->
    <div id="start-screen" class="screen active">
      <h1><i class="fas fa-robot"></i> Sentient AI</h1>
      <p>Welcome to the Sentient AI Quiz Challenge!</p>
      <button class="btn" onclick="startQuiz()">Begin Quiz</button>
    </div>

    <!-- Quiz Screen -->
    <div id="quiz-screen" class="screen">
      <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
      <h2 id="question-text"></h2>
      <div id="feedback-message" class="feedback-message"></div>
      <div id="options" class="options-grid"></div>
      <p id="explanation-text"></p>
      <button id="next-btn" class="btn" onclick="nextQuestion()" disabled>Next</button>
    </div>

    <!-- Result Screen -->
    <div id="result-screen" class="screen">
      <h1>Results</h1>
      <div class="score-circle" id="score-circle">
        <div class="score-value" id="score-value">0%</div>
      </div>
      <p id="result-message"></p>
      <button class="btn" onclick="restartQuiz()">Restart</button>
    </div>
  </div>

  <script>
    // Example quiz data
    const quizData = [
      {
        question: "What token powers the Sentient AI ecosystem?",
        options: ["PSI", "ETH", "BTC", "SOL"],
        correct: 0,
        explanation: "PSI is the utility token that fuels Sentient AI."
      },
      {
        question: "Sentient AI agents can:",
        options: ["Learn and trade knowledge", "Only answer trivia", "Mine Bitcoin", "Run social media"],
        correct: 0,
        explanation: "Sentient AI agents learn, trade, and collaborate."
      }
    ];

    let currentIndex = 0;
    let score = 0;
    let selected = false;

    const startScreen = document.getElementById('start-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultScreen = document.getElementById('result-screen');
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options');
    const explanationText = document.getElementById('explanation-text');
    const feedbackMessage = document.getElementById('feedback-message');
    const nextBtn = document.getElementById('next-btn');
    const progressFill = document.getElementById('progress-fill');
    const scoreValue = document.getElementById('score-value');
    const resultMessage = document.getElementById('result-message');
    const scoreCircle = document.getElementById('score-circle');

    function startQuiz() {
      startScreen.classList.remove('active');
      quizScreen.classList.add('active');
      loadQuestion();
    }

    function loadQuestion() {
      const q = quizData[currentIndex];
      questionText.textContent = q.question;
      optionsContainer.innerHTML = '';
      feedbackMessage.style.display = 'none';
      explanationText.textContent = '';
      nextBtn.disabled = true;
      selected = false;
      progressFill.style.width = `${((currentIndex+1)/quizData.length)*100}%`;

      q.options.forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.textContent = opt;
        btn.onclick = () => selectOption(i, btn);
        optionsContainer.appendChild(btn);
      });
    }

    function selectOption(index, btn) {
      if (selected) return;
      selected = true;
      const q = quizData[currentIndex];
      const opts = document.querySelectorAll('.option-btn');
      opts.forEach((o,i) => {
        if (i===q.correct) o.classList.add('correct');
        if (i===index && i!==q.correct) o.classList.add('incorrect');
      });
      if (index===q.correct) {
        score++;
        feedbackMessage.textContent = "✓ Correct!";
        feedbackMessage.className = 'feedback-message feedback-correct';
      } else {
        feedbackMessage.textContent = "✗ Incorrect!";
        feedbackMessage.className = 'feedback-message feedback-incorrect';
      }
      feedbackMessage.style.display = 'block';
      explanationText.textContent = q.explanation;
      nextBtn.disabled = false;
    }

    function nextQuestion() {
      currentIndex++;
      if (currentIndex<quizData.length) {
        loadQuestion();
      } else {
        showResults();
      }
    }

    function showResults() {
      quizScreen.classList.remove('active');
      resultScreen.classList.add('active');
      const pct = Math.round((score/quizData.length)*100);
      scoreValue.textContent = pct+"%";

      let cur=0;
      const interval = setInterval(()=>{
        if (cur>=pct) clearInterval(interval);
        else {
          cur++;
          scoreCircle.style.background = `conic-gradient(var(--primary) ${cur}%, var(--darker) 0%)`;
        }
      },15);

      if (pct>=80) resultMessage.textContent="Excellent!";
      else if (pct>=50) resultMessage.textContent="Good work!";
      else resultMessage.textContent="Keep practicing!";
    }

    function restartQuiz() {
      currentIndex=0; score=0;
      resultScreen.classList.remove('active');
      startScreen.classList.add('active');
    }

    function createMatrixBackground() {
      const canvas = document.getElementById('matrixBg');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const chars="01".split("");
      const fontSize=14;
      const columns = canvas.width/fontSize;
      const drops = [];
      for (let i=0;i<columns;i++) drops[i]=Math.random()*canvas.height/fontSize;

      function draw() {
        ctx.fillStyle="rgba(5,7,30,0.05)";
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle="rgba(0,243,255,0.8)";
        ctx.font=`${fontSize}px monospace`;
        for (let i=0;i<drops.length;i++) {
          const text=chars[Math.floor(Math.random()*chars.length)];
          ctx.fillText(text,i*fontSize,drops[i]*fontSize);
          if (drops[i]*fontSize>canvas.height && Math.random()>0.975) drops[i]=0;
          drops[i]++;
        }
      }
      setInterval(draw,33);
    }
    window.onload=createMatrixBackground;
  </script>
</body>
</html>
