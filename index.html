<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sentient AI Quiz</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* --- (your existing CSS unchanged except below fixes) --- */

    .score-circle {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 30px auto;
      position: relative;
      background: conic-gradient(var(--primary) 0%, var(--darker) 0%);
      box-shadow: 0 0 30px rgba(0, 243, 255, 0.3);
      transition: background 1s linear; /* smooth transition */
    }
  </style>
</head>
<body>
  <!-- FIXED: changed div to canvas -->
  <canvas class="matrix-bg" id="matrixBg"></canvas>
  
  <div class="container">
    <div class="particles" id="particles"></div>
    
    <!-- Start Screen -->
    <div id="start-screen" class="screen active">
      <div class="header">
        <h1><i class="fas fa-robot"></i> Sentient AI</h1>
        <p>Test your knowledge of the decentralized AI platform shaping the future</p>
      </div>
      
      <div class="question-container">
        <div class="question-text">
          Welcome to the Sentient AI Quiz Challenge. This interactive experience will test your understanding of the revolutionary Sentient platform, its AI agents, marketplace, and the PSI token ecosystem.
        </div>
        
        <div class="options-grid">
          <div class="option-btn" style="justify-content: center; cursor: default; border: none;" role="listitem">
            <i class="fas fa-brain" style="margin-right: 10px; color: var(--primary);"></i>
            <span>5 Challenging Questions</span>
          </div>
          <div class="option-btn" style="justify-content: center; cursor: default; border: none;" role="listitem">
            <i class="fas fa-trophy" style="margin-right: 10px; color: var(--primary);"></i>
            <span>Immediate Feedback & Explanations</span>
          </div>
          <div class="option-btn" style="justify-content: center; cursor: default; border: none;" role="listitem">
            <i class="fas fa-rocket" style="margin-right: 10px; color: var(--primary);"></i>
            <span>Futuristic Interactive Experience</span>
          </div>
        </div>
      </div>
      
      <div class="controls">
        <button class="btn" onclick="startQuiz()">
          <i class="fas fa-play" style="margin-right: 10px;"></i> Begin Quiz
        </button>
      </div>
    </div>
    
    <!-- Quiz Screen -->
    <div id="quiz-screen" class="screen">
      <div class="progress-container">
        <div class="progress-info">
          <span>Question <span id="current-num">1</span> of <span id="total-num">5</span></span>
          <span>Score: <span id="current-score">0</span></span>
        </div>
        <div class="progress-bar">
          <div id="progress-fill" class="progress-fill"></div>
        </div>
      </div>
      
      <div class="question-container">
        <h2 class="question-text" id="question-text"></h2>
        
        <!-- Feedback Message -->
        <div id="feedback-message" class="feedback-message"></div>
        
        <div id="options" class="options-grid"></div>
        
        <div id="explanation-box" class="explanation-box">
          <h3><i class="fas fa-info-circle"></i> Explanation</h3>
          <p id="explanation-text"></p>
        </div>
      </div>
      
      <div class="controls">
        <button id="next-btn" class="btn" onclick="nextQuestion()" disabled>
          Next Question <i class="fas fa-arrow-right" style="margin-left: 10px;"></i>
        </button>
      </div>
    </div>
    
    <!-- Result Screen -->
    <div id="result-screen" class="screen">
      <div class="header">
        <h1>Mission Complete</h1>
        <p>Your Sentient AI knowledge has been evaluated</p>
      </div>
      
      <div class="score-circle" id="score-circle">
        <div class="score-text">
          <div class="score-value" id="score-value">0%</div>
          <div class="score-label">Final Score</div>
        </div>
      </div>
      
      <div class="result-message" id="result-message"></div>
      
      <div class="controls">
        <button class="btn" onclick="restartQuiz()">
          <i class="fas fa-redo" style="margin-right: 10px;"></i> Try Again
        </button>
      </div>
    </div>
  </div>

  <script>
    /* --- your quizData unchanged --- */

    // Quiz state
    let currentIndex = 0;
    let score = 0;
    let selectedAnswer = false;

    // DOM elements
    const startScreen = document.getElementById('start-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultScreen = document.getElementById('result-screen');
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options');
    const explanationBox = document.getElementById('explanation-box');
    const explanationText = document.getElementById('explanation-text');
    const feedbackMessage = document.getElementById('feedback-message');
    const nextBtn = document.getElementById('next-btn');
    const currentNum = document.getElementById('current-num');
    const totalNum = document.getElementById('total-num');
    const currentScore = document.getElementById('current-score');
    const progressFill = document.getElementById('progress-fill');
    const scoreValue = document.getElementById('score-value');
    const resultMessage = document.getElementById('result-message');
    const scoreCircle = document.getElementById('score-circle');

    // Initialize
    function init() {
      createParticles();
      createMatrixBackground();
      totalNum.textContent = quizData.length;
    }

    function startQuiz() {
      startScreen.classList.remove('active');
      quizScreen.classList.add('active');
      loadQuestion();
    }

    function loadQuestion() {
      const q = quizData[currentIndex];
      currentNum.textContent = currentIndex + 1;
      questionText.textContent = q.question;
      currentScore.textContent = score;
      
      // FIXED progress bar (start at 20% on Q1)
      progressFill.style.width = `${((currentIndex + 1) / quizData.length) * 100}%`;
      
      optionsContainer.innerHTML = '';
      explanationBox.style.display = 'none';
      feedbackMessage.style.display = 'none';
      feedbackMessage.className = 'feedback-message';
      
      const letters = ['A', 'B', 'C', 'D'];
      q.options.forEach((option, index) => {
        const button = document.createElement('button');
        button.className = 'option-btn';
        button.innerHTML = `
          <span class="option-letter">${letters[index]}</span>
          <span class="option-text">${option}</span>
          <span class="option-status"></span>
        `;
        button.onclick = () => selectOption(index, button);
        optionsContainer.appendChild(button);
      });
      
      nextBtn.disabled = true;
      selectedAnswer = false;
    }

    function selectOption(index, button) {
      if (selectedAnswer) return;
      selectedAnswer = true;
      const q = quizData[currentIndex];
      const options = document.querySelectorAll('.option-btn');
      options.forEach(opt => opt.style.pointerEvents = 'none');
      
      options.forEach((opt, i) => {
        const status = opt.querySelector('.option-status');
        if (i === q.correct) {
          opt.classList.add('correct');
          status.innerHTML = '<i class="fas fa-check"></i>';
        } else if (i === index) {
          opt.classList.add('incorrect');
          status.innerHTML = '<i class="fas fa-times"></i>';
        }
      });
      
      if (index === q.correct) {
        score++;
        currentScore.textContent = score;
        feedbackMessage.textContent = "‚úì Correct! Well done!";
        feedbackMessage.className = 'feedback-message feedback-correct';
      } else {
        feedbackMessage.textContent = "‚úó Incorrect! The correct answer is highlighted in green.";
        feedbackMessage.className = 'feedback-message feedback-incorrect';
      }
      feedbackMessage.style.display = 'block';
      explanationText.textContent = q.explanation;
      explanationBox.style.display = 'block';
      nextBtn.disabled = false;
    }

    function nextQuestion() {
      currentIndex++;
      if (currentIndex < quizData.length) {
        loadQuestion();
      } else {
        showResults();
      }
    }

    function showResults() {
      quizScreen.classList.remove('active');
      resultScreen.classList.add('active');
      const percentage = Math.round((score / quizData.length) * 100);
      scoreValue.textContent = `${percentage}%`;

      // Smooth animate score circle
      let current = 0;
      const interval = setInterval(() => {
        if (current >= percentage) {
          clearInterval(interval);
        } else {
          current++;
          scoreCircle.style.background = `conic-gradient(var(--primary) ${current}%, var(--darker) 0%)`;
        }
      }, 15);

      if (percentage >= 80) {
        resultMessage.textContent = "Outstanding! You're a Sentient AI expert! üöÄ";
        resultMessage.classList.add('neon-text');
      } else if (percentage >= 60) {
        resultMessage.textContent = "Great job! You have solid Sentient knowledge! üí°";
      } else if (percentage >= 40) {
        resultMessage.textContent = "Good effort! Keep learning about Sentient AI! üîç";
      } else {
        resultMessage.textContent = "Keep exploring the Sentient platform to improve! üìö";
      }
    }

    function restartQuiz() {
      currentIndex = 0;
      score = 0;
      resultScreen.classList.remove('active');
      startScreen.classList.add('active');
    }

    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      particlesContainer.innerHTML = ''; // FIXED: clear old particles
      const particleCount = 30;
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        const size = Math.random() * 5 + 2;
        const posX = Math.random() * 100;
        const delay = Math.random() * 15;
        const duration = Math.random() * 10 + 15;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${posX}%`;
        particle.style.animationDelay = `${delay}s`;
        particle.style.animationDuration = `${duration}s`;
        particlesContainer.appendChild(particle);
      }
    }

    function createMatrixBackground() {
      const canvas = document.getElementById('matrixBg');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const chars = "01";
      const charArray = chars.split("");
      const fontSize = 14;
      const columns = canvas.width / fontSize;
      const drops = [];
      for (let i = 0; i < columns; i++) {
        drops[i] = Math.floor(Math.random() * canvas.height / fontSize);
      }
      function draw() {
        ctx.fillStyle = "rgba(5, 7, 30, 0.04)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "rgba(0, 243, 255, 0.8)";
        ctx.font = `${fontSize}px 'Orbitron', monospace`;
        for (let i = 0; i < drops.length; i++) {
          const text = charArray[Math.floor(Math.random() * charArray.length)];
          ctx.fillText(text, i * fontSize, drops[i] * fontSize);
          if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
            drops[i] = 0;
          }
          drops[i]++;
        }
      }
      setInterval(draw, 33);
    }

    window.onload = init;
  </script>
</body>
</html>
